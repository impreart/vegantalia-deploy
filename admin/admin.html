<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VeganTalia Admin</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
    <h1>VeganTalia Rezept-Admin</h1>
    <p>Importiere eine recipes.json, dann kannst du Rezepte erstellen oder bearbeiten.</p>
</header>

<main>
    <!-- START: nur Import sichtbar (außer lokal gespeicherte Daten vorhanden) -->
    <section id="start-section" style="text-align:center; margin:20px 0;">
        <button id="import-json-start-btn">Import JSON (Start)</button>
        <input id="import-file-start" type="file" accept="application/json" style="display:none" />
        <div id="start-hint" style="margin-top:10px;color:#666;font-size:14px;">
            Falls du bereits lokal gespeicherte Rezepte hast, werden diese automatisch geladen.
        </div>
    </section>

    <!-- Nach Import: Hauptmenü -->
    <section id="menu-section" style="text-align:center; display:none; margin-bottom:20px;">
        <button id="create-mode-btn">Rezept erstellen</button>
        <button id="edit-mode-btn">Rezept bearbeiten</button>
        <button id="featured-mode-btn">Rezept der Woche</button>
        <button id="export-json-btn">Export JSON</button>
        <button id="import-json-btn">Lade JSON</button> <!-- Funktionierender Lade-Button -->
        <input id="import-file" type="file" accept="application/json" style="display:none" /> <!-- verstecktes File Input -->
    </section>

    <!-- Erstellen -->
    <section id="form-section" style="display:none; max-width:980px; margin:0 auto;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2>Neues Rezept hinzufügen</h2>
            <button id="create-back-btn">◀ Zurück zur Auswahl</button>
        </div>
        <form id="recipe-form">
            <input type="text" id="title" placeholder="Titel" required>
            <input type="text" id="subtitle" placeholder="Untertitel">
            
            <label style="display:block; margin:8px 0 4px 0;">Bild</label>
            <input type="file" id="image" accept="image/*">
            <img id="image-preview" style="display:none; max-width:240px; margin:8px 0" />

            <select id="category">
                <option>Hauptgerichte</option>
                <option>Salate</option>
                <option>Dessert</option>
                <option>Vorspeise</option>
                <option>Schnelle Rezepte</option>
            </select>

            <input type="text" id="preparation-time" placeholder="Vorbereitung">
            <input type="text" id="cook-time" placeholder="Kochzeit">
            <input type="number" id="portion" placeholder="Portionen" value="2">
            <select id="difficulty">
                <option>Einfach</option>
                <option>Mittel</option>
                <option>Schwer</option>
            </select>

            <h3>Zutaten</h3>
            <div id="ingredients-container"></div>
            <button type="button" id="add-ingredient-group">Obergruppe hinzufügen</button>

            <h3>Zubereitung</h3>
            <div id="steps-container"></div>
            <button type="button" id="add-step">Neuen Schritt hinzufügen</button>

            <h3>Tipps & Variationen</h3>
            <textarea id="tips"></textarea>

            <h3>Nährwerte</h3>
            <input type="number" id="kcal" placeholder="kcal">
            <input type="number" id="protein" placeholder="Eiweiß">
            <input type="number" id="carbs" placeholder="KH">
            <input type="number" id="fat" placeholder="Fett">
            <input type="number" id="fiber" placeholder="Ballaststoffe">

            <div style="margin-top:14px;">
                <button type="submit">Rezept speichern</button>
            </div>
        </form>
    </section>

    <!-- Bearbeiten -->
    <section id="edit-section" style="display:none; max-width:980px; margin:0 auto;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2>Rezept bearbeiten</h2>
            <button id="edit-back-btn">◀ Zurück zur Auswahl</button>
        </div>
        <div style="margin-bottom:12px;">
            <input type="text" id="search-recipe" placeholder="Rezept suchen (Live-Suche)">
        </div>
        <ul id="search-results" style="max-width:980px; margin-bottom:12px;"></ul>
        <div id="edit-form" style="display:none;">
            <form id="edit-recipe-form">
                <input type="text" id="edit-title" placeholder="Titel" required>
                <input type="text" id="edit-subtitle" placeholder="Untertitel">
                
                <label style="display:block; margin:8px 0 4px 0;">Bild</label>
                <input type="file" id="edit-image" accept="image/*">
                <img id="edit-image-preview" style="display:none; max-width:240px; margin:8px 0" />

                <select id="edit-category">
                    <option>Hauptgerichte</option>
                    <option>Salate</option>
                    <option>Dessert</option>
                    <option>Vorspeise</option>
                    <option>Schnelle Rezepte</option>
                </select>

                <input type="text" id="edit-preparation-time" placeholder="Vorbereitung">
                <input type="text" id="edit-cook-time" placeholder="Kochzeit">
                <input type="number" id="edit-portion" placeholder="Portionen" value="2">
                <select id="edit-difficulty">
                    <option>Einfach</option>
                    <option>Mittel</option>
                    <option>Schwer</option>
                </select>

                <h3>Zutaten</h3>
                <div id="edit-ingredients-container"></div>
                <button type="button" id="edit-add-ingredient-group">Obergruppe hinzufügen</button>

                <h3>Zubereitung</h3>
                <div id="edit-steps-container"></div>
                <button type="button" id="edit-add-step">Neuen Schritt hinzufügen</button>

                <h3>Tipps & Variationen</h3>
                <textarea id="edit-tips"></textarea>

                <h3>Nährwerte</h3>
                <input type="number" id="edit-kcal" placeholder="kcal">
                <input type="number" id="edit-protein" placeholder="Eiweiß">
                <input type="number" id="edit-carbs" placeholder="KH">
                <input type="number" id="edit-fat" placeholder="Fett">
                <input type="number" id="edit-fiber" placeholder="Ballaststoffe">

                <div style="margin-top:14px;">
                    <button type="button" id="save-edit-btn">Änderungen speichern</button>
                    <button type="button" id="delete-edit-btn">Rezept löschen</button>
                </div>
            </form>
        </div>
    </section>

    <!-- Featured Section -->
    <section id="featured-section" style="display:none; max-width:980px; margin:0 auto;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2>Rezept der Woche</h2>
            <button id="featured-back-btn">◀ Zurück zur Auswahl</button>
        </div>
        <p>Wähle ein Rezept aus und füge optional zusätzlichen Text hinzu.</p>
        
        <label style="display:block; margin:12px 0 4px 0;">Rezept auswählen:</label>
        <select id="featured-recipe-select" style="width:100%; padding:8px; margin-bottom:16px;"></select>
        
        <div id="featured-preview" style="margin:20px 0; padding:15px; background:#f0f0f0; border-radius:5px;">
            <p>Vorschau wird hier angezeigt...</p>
        </div>
        
        <label style="display:block; margin:12px 0 4px 0;">Zusätzlicher Text (optional):</label>
        <textarea id="featured-additional-text" rows="4" style="width:100%; padding:8px; margin-bottom:16px;"></textarea>
        
        <button id="btn-save-featured">Speichern & featured.json herunterladen</button>
    </section>

    <!-- Liste -->
    <section id="list-section" style="max-width:980px; margin:18px auto 60px;">
        <h2>Gespeicherte Rezepte</h2>
        <ul id="recipe-list"></ul>
    </section>
</main>

<script src="script.js"></script>
</body>
</html>
